{
  "Dumping": {
    "situation": "Dumping",
    "startQuestionId": "dump-thoughts-text",
    "questions": [
      {
        "id": "dump-thoughts-text",
        "question": "나의 생각을 자유롭게 작성해주세요",
        "type": "text",
        "required": true,
        "nextQuestionId": "dump-complete",
        "aiPromptTemplate": {
          "template": "# 생각 정리 도움\n\n## [INPUT – Human]\n\n선택한 이전 Cycle Context:\n{{selectedContext}}\n\n## [AI PROMPT]\n\nYou are helping to organize and start thinking.\n\nTasks:\n1. Based on the selected context from previous cycles, help identify what to think about.\n2. Suggest questions or prompts to guide thinking.\n3. Identify themes or patterns from previous work that might be relevant.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Starting points for thinking are identified\n- Relevant context is highlighted"
        }
      },
      {
        "id": "dump-complete",
        "question": "생각 정리가 완료되었나요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "WhatToDo",
        "onNoNextQuestionId": "dump-thoughts-text"
      }
    ]
  },
  "WhatToDo": {
    "situation": "WhatToDo",
    "startQuestionId": "action-intent-text",
    "questions": [
      {
        "id": "action-intent-text",
        "question": "지금 하고 싶은 행동/일을 작성해주세요",
        "type": "text",
        "required": true,
        "nextQuestionId": "action-intent-clear",
        "showData": {
          "type": "dump-thoughts",
          "label": "Dumping 단계에서 작성한 생각",
          "source": "getAnswerByQuestionId",
          "sourceParam": "dump-thoughts-text"
        },
        "aiPromptTemplate": {
          "template": "# 하고 싶은 행동/일 정리 도움\n\n## [INPUT – Human]\n\nDumping 단계의 생각:\n{{dump-thoughts-text}}\n\n## [AI PROMPT]\n\nYou are helping to clarify what the user wants to do.\n\nTasks:\n1. Based on the dumped thoughts, help identify what action or task the user might want to do.\n2. Suggest potential motivations behind it.\n3. Extract possible assumptions about the action.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- What the user wants to do is suggested\n- Motivation identified"
        }
      },
      {
        "id": "action-intent-clear",
        "question": "하고 싶은 행동/일이 명확한가요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "DefiningIntent",
        "onNoNextQuestionId": "action-intent-text"
      }
    ]
  },
  "DefiningIntent": {
    "situation": "DefiningIntent",
    "startQuestionId": "intent-summary-text",
    "questions": [
      {
        "id": "intent-summary-text",
        "question": "의도를 한 문장으로 작성해주세요. 하고 싶은 일, 그 이유, 그리고 중요한 가정을 포함하세요. 기능이나 기술이 아닌 목적에 집중하고, 설명할 때마다 일관되게 말할 수 있어야 합니다.",
        "type": "text",
        "required": true,
        "nextQuestionId": "intent-proceed",
        "showData": {
          "type": "action-intent",
          "label": "하고 싶은 행동/일",
          "source": "getAnswerByQuestionId",
          "sourceParam": "action-intent-text"
        },
        "aiPromptTemplate": {
          "template": "# 의도 한 문장 정리 도움\n\n## [INPUT – Human]\n\n1. Dumping 단계의 생각:\n- {{dump-thoughts-text}}\n\n2. 하고 싶은 행동/일:\n- {{action-intent-text}}\n\n## [AI PROMPT]\n\nYou are helping to draft a single-sentence intent.\n\nTasks:\n1. Consider the thoughts from the Dumping phase and the action/task the user wants to do.\n2. In one clear sentence, synthesize: (a) what the user wants to do, (b) why it is needed (core motivation or problem to solve), and (c) one key assumption if relevant.\n3. Keep the sentence focused on purpose and outcome; do not mention features or technology.\n4. Ensure the sentence is something the user can repeat consistently.\n\nImportant: Output ONE sentence only. It should integrate what, why, and key assumption without listing them separately.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Intent is one clear sentence\n- What, why, and key assumption (if any) are included"
        }
      },
      {
        "id": "intent-proceed",
        "question": "이 의도로 진행할까요? (일관되고, 기능/기술이 아닌 목적에 맞다면 예)",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "GatheringFacts",
        "onNoNextSituation": "FailingIntent"
      }
    ]
  },
  "FailingIntent": {
    "situation": "FailingIntent",
    "startQuestionId": "intent-unclear-what",
    "questions": [
      {
        "id": "intent-unclear-what",
        "question": "어떤 부분이 불명확한가요?",
        "type": "text",
        "required": true,
        "nextQuestionId": "intent-clarify-questions"
      },
      {
        "id": "intent-clarify-questions",
        "question": "명확히 하기 위한 질문을 작성했나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "intent-clarify-questions-text",
        "onNoNextQuestionId": "intent-clarify-questions-text"
      },
      {
        "id": "intent-clarify-questions-text",
        "question": "명확히 하기 위한 질문을 작성해주세요",
        "type": "text",
        "required": true,
        "nextQuestionId": "intent-ready-rewrite"
      },
      {
        "id": "intent-ready-rewrite",
        "question": "Intent를 다시 작성할 준비가 되었나요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "DefiningIntent",
        "onNoNextQuestionId": "intent-ready-rewrite"
      }
    ]
  },
  "GatheringFacts": {
    "situation": "GatheringFacts",
    "startQuestionId": "current-facts-text",
    "questions": [
      {
        "id": "current-facts-text",
        "question": "현재 상황에 대한 사실들을 나열해주세요 (관찰 가능한 것, 측정된 것, 확인된 것)",
        "type": "multitext",
        "required": true,
        "nextQuestionId": "facts-complete",
        "showData": {
          "type": "intent-summary",
          "label": "의도 요약",
          "source": "getIntentSummary"
        },
        "aiPromptTemplate": {
          "template": "# 현재 상황 사실 수집 도움\n\n## [INPUT - Human]\n\n1. Dumping 단계의 생각:\n- {{dump-thoughts-text}}\n\n2. 하고 싶은 행동/일:\n- {{action-intent-text}}\n\n3. 의도 요약 (한 문장):\n- {{intent-summary-text}}\n\n## [AI PROMPT]\n\nYou are helping to gather facts about the current situation before problem definition.\n\nRules:\n- Focus only on FACTS (observable, measurable, verified)\n- No opinions, assumptions, or interpretations\n- No proposed solutions or problems yet\n- Facts should be specific and concrete\n\nTasks:\n1. Based on the intent and context, identify what factual information is needed.\n2. Suggest categories of facts to collect:\n   - Current state observations (what exists now)\n   - Measurements and metrics (quantifiable data)\n   - Constraints and limitations (verified boundaries)\n   - Stakeholders and their verified needs\n   - Historical facts (what happened, when)\n3. For each category, provide example questions to gather facts.\n4. Identify what facts are already implied in the context.\n5. Highlight gaps where facts are needed but not yet collected.\n\nImportant: Facts are objective truths, not interpretations. \"The system is slow\" is an interpretation. \"Response time is 5 seconds\" is a fact.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Fact categories identified\n- Example questions provided\n- Clear distinction between facts and interpretations"
        }
      },
      {
        "id": "facts-complete",
        "question": "충분한 사실을 수집했나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "facts-verified",
        "onNoNextQuestionId": "current-facts-text"
      },
      {
        "id": "facts-verified",
        "question": "나열한 것들이 모두 사실(관찰/측정/확인된 것)인가요? (의견이나 가정이 아닌)",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "SelectingProblem",
        "onNoNextQuestionId": "current-facts-text"
      }
    ]
  },
  "SelectingProblem": {
    "situation": "SelectingProblem",
    "startQuestionId": "problem-boundaries-text",
    "questions": [
      {
        "id": "problem-boundaries-text",
        "question": "문제의 경계를 명확히 작성해주세요 (포함/제외)",
        "type": "text",
        "required": true,
        "nextQuestionId": "problem-facts-sufficient",
        "showData": {
          "type": "gathered-facts",
          "label": "수집된 사실들",
          "source": "getAnswerByQuestionId",
          "sourceParam": "current-facts-text"
        },
        "aiPromptTemplate": {
          "template": "# 문제 선택 및 경계 정의 도움\n\n## [INPUT – Human]\n\n1. Dumping 단계의 생각:\n- {{dump-thoughts-text}}\n\n2. 하고 싶은 행동/일:\n- {{action-intent-text}}\n\n3. 의도 요약 (한 문장):\n- {{intent-summary-text}}\n\n4. 수집된 사실들:\n{{current-facts-text}}\n\n5. 이전 개선점 (선택적):\n{{improvements}}\n\n## [AI PROMPT]\n\nYou are performing problem decomposition based on GATHERED FACTS.\n\nRules:\n- No solution framing.\n- No implementation hints.\n- Problems must be grounded in the gathered facts.\n- If facts are insufficient, indicate what additional facts are needed.\n\nPriority Principle:\n- **Problems that rarely change must be resolved first.**\n- When ranking problems, prioritize stability: problems with stable requirements, clear boundaries, and minimal expected changes should be addressed before problems that are likely to evolve.\n- This reduces rework and establishes a solid foundation.\n\nTasks:\n1. Review the gathered facts about the current situation.\n2. Based on the facts (not assumptions), enumerate problems that are evidenced by the facts.\n3. For each problem:\n   - Cite the supporting facts\n   - Assess expected change frequency (stable vs volatile)\n4. Rank problems by:\n   - **Primary: Evidence strength (well-supported by facts first)**\n   - **Secondary: Change frequency (stable first)**\n   - Tertiary: Urgency, impact, and dependency depth\n5. If the facts are insufficient to define a clear problem:\n   - Indicate what additional facts need to be gathered\n   - Suggest returning to GatheringFacts phase\n6. Select exactly ONE problem (prefer the most fact-supported and stable one).\n7. Rewrite it as a single precise question.\n8. If oversized, decompose and select the smallest viable unit.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- One problem only\n- Grounded in gathered facts\n- Expressed as a question\n- Solvable independently\n- Change frequency assessment included\n- OR: Clear indication that more facts are needed",
          "selectableAnswers": {
            "questionId": "learned-improvements-text",
            "label": "이전 개선점 선택",
            "variableName": "improvements"
          }
        }
      },
      {
        "id": "problem-facts-sufficient",
        "question": "문제를 정의하기 위한 사실이 충분한가요? (추가 사실 수집이 필요하면 '아니오')",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "problem-distinct",
        "onNoNextSituation": "GatheringFacts"
      },
      {
        "id": "problem-distinct",
        "question": "문제가 Intent와 구별되나요? (Intent는 큰 그림, 문제는 구체적)",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "problem-measurable",
        "onNoNextSituation": "DefiningIntent",
        "showData": {
          "type": "intent-summary",
          "label": "기존 Intent 요약",
          "source": "getIntentSummary"
        }
      },
      {
        "id": "problem-measurable",
        "question": "문제를 해결했는지 알 수 있나요? (측정 가능한가요?)",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "DefiningAcceptance",
        "onNoNextQuestionId": "problem-measurable"
      }
    ]
  },
  "DefiningAcceptance": {
    "situation": "DefiningAcceptance",
    "startQuestionId": "criteria-text",
    "questions": [
      {
        "id": "criteria-text",
        "question": "완료 기준을 작성해주세요 (Given-When-Then 형식 권장)",
        "type": "text",
        "required": true,
        "nextQuestionId": "criteria-measurable",
        "aiPromptTemplate": {
          "template": "# 완료 기준(Acceptance Criteria) 정의 도움\n\n## [INPUT – Human]\n\n1. Selected problem:\n- {{problem}}\n\n## [AI PROMPT]\n\nYou are defining verification contracts.\n\nRules:\n- Each criterion must be objectively testable.\n- No subjective or vague wording.\n\nTasks:\n1. Generate 3–5 Given–When–Then acceptance criteria.\n2. Validate testability of each criterion.\n3. Rewrite non-testable criteria.\n4. Mark logical dependencies between criteria.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Criteria are testable\n- Completion is objectively decidable"
        }
      },
      {
        "id": "criteria-measurable",
        "question": "각 기준을 true/false로 확인할 수 있나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "criteria-linked",
        "onNoNextSituation": "SelectingProblem"
      },
      {
        "id": "criteria-linked",
        "question": "기준이 문제와 연결되어 있나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "criteria-define-done",
        "onNoNextSituation": "SelectingProblem"
      },
      {
        "id": "criteria-define-done",
        "question": "기준으로 \"완료\"를 알 수 있나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "criteria-count",
        "onNoNextSituation": "SelectingProblem"
      },
      {
        "id": "criteria-count",
        "question": "기준이 3-7개 정도인가요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "CheckingFeasibility",
        "onNoNextQuestionId": "criteria-count"
      }
    ]
  },
  "CheckingFeasibility": {
    "situation": "CheckingFeasibility",
    "startQuestionId": "problem-select",
    "questions": [
      {
        "id": "problem-select",
        "question": "검증할 문제를 선택해주세요",
        "type": "text",
        "required": true,
        "nextQuestionId": "constraints-text",
        "aiPromptTemplate": {
          "template": "",
          "selectableAnswers": {
            "questionId": "problem-boundaries-text",
            "label": "이전 문제 목록",
            "variableName": "selectedProblemId"
          }
        }
      },
      {
        "id": "constraints-text",
        "question": "기술적 제약사항을 작성해주세요",
        "type": "text",
        "required": true,
        "nextQuestionId": "resources-text",
        "aiPromptTemplate": {
          "template": "# 실행 가능성 검증 및 리스크 분석 도움\n\n## [INPUT – Human]\n\n1. Problem + acceptance criteria:\n- Problem: {{problem}}\n- Acceptance Criteria: {{acceptanceCriteria}}\n\n## [AI PROMPT]\n\nYou are performing risk intelligence analysis.\n\nRules:\n- Expose risk, do not hide it.\n- Focus on learning, not safety.\n\nTasks:\n1. Identify technical, time, and dependency risks.\n2. Rank risks by failure impact.\n3. Select the SINGLE highest-risk assumption.\n4. Define the smallest experiment to validate it.\n5. Describe what failure would teach.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- One dominant risk identified\n- One learning experiment defined"
        }
      },
      {
        "id": "resources-text",
        "question": "리소스 요구사항을 작성해주세요",
        "type": "text",
        "required": true,
        "nextQuestionId": "feasibility-decision",
        "aiPromptTemplate": {
          "template": "# 리소스 요구사항 추정 도움\n\n## [INPUT – Human]\n\n1. Problem + acceptance criteria:\n- Problem: {{problem}}\n- Acceptance Criteria: {{acceptanceCriteria}}\n- Technical Constraints: {{constraints-text}}\n\n## [AI PROMPT]\n\nYou are estimating resource requirements.\n\nTasks:\n1. Estimate time requirements (hours/days).\n2. Estimate human resources needed.\n3. Identify external dependencies.\n4. Define resource constraints.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Time estimate provided\n- Resource dependencies identified"
        }
      },
      {
        "id": "feasibility-decision",
        "question": "결정을 내렸나요?",
        "type": "multiple",
        "required": true,
        "options": ["feasible", "too hard", "problem too big"]
      }
    ]
  },
  "Designing": {
    "situation": "Designing",
    "startQuestionId": "design-text",
    "questions": [
      {
        "id": "design-text",
        "question": "최소 구조/인터페이스 설계를 작성해주세요 (d2 언어 권장)",
        "type": "text",
        "required": true,
        "nextQuestionId": "design-covers-criteria",
        "aiPromptTemplate": {
          "template": "# 최소 설계(Design) 작성 도움\n\n## [INPUT – Human]\n\n1. Acceptance criteria:\n- {{acceptanceCriteria}}\n\n## [AI PROMPT]\n\nYou are designing a minimal execution architecture.\n\nPrimary Goal:\n- Satisfy acceptance criteria with the simplest possible structure.\n\nRules:\n- Design ONLY what acceptance requires.\n- No future-proofing.\n- No speculative features.\n- Design patterns are OPTIONAL, not mandatory.\n- Patterns must never drive the design; acceptance criteria do.\n- Write design with d2 lang (diagram modeling language: https://d2lang.com/)\n\nPriority Principle:\n- **Components that rarely change must be designed first.**\n- When defining components, prioritize stability: components with stable interfaces, clear responsibilities, and minimal expected changes should be designed before components that are likely to evolve.\n- This reduces redesign work and establishes a solid architectural foundation.\n\nTasks:\n1. Define minimal components (maximum 5).\n2. For each component, assess its expected change frequency:\n   - Stable components: clear responsibilities, well-defined interfaces, minimal expected changes\n   - Volatile components: evolving interfaces, unclear responsibilities, likely to change\n3. Describe state transitions or data flow between components.\n4. Map each acceptance criterion to the responsible component.\n5. **Design order: Design stable components first, then volatile ones.**\n\nDesign Pattern Evaluation:\n6. List relevant design pattern candidates (for example: State, Strategy, Pipeline, Observer, Command).\n7. For each candidate pattern:\n   - Why it could fit this problem\n   - What problem it would solve\n   - What complexity it would introduce\n8. Explicitly decide:\n   - Pattern selected (if any) and justification\n   - Patterns rejected and reasons for rejection\n\nSimplification:\n9. Identify unnecessary abstractions or indirections.\n10. Propose a simpler structure if possible.\n11. Explain how the design could be simplified further if requirements were reduced.\n\nOutput Constraint:\n- The design must make implementation order naturally inferable.\n- The design must be explainable without referencing patterns.\n- Component change frequency assessment must be included.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Structure is minimal\n- State or data flow is explicit\n- Design decisions (including pattern usage or rejection) are justified\n- Implementation order is obvious\n- Component change frequency assessment included"
        }
      },
      {
        "id": "design-covers-criteria",
        "question": "설계가 완료 기준을 다루나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "design-ready-to-implement",
        "onNoNextSituation": "DefiningAcceptance"
      },
      {
        "id": "design-ready-to-implement",
        "question": "구현을 시작할 수 있을 정도인가요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "BreakingTasks",
        "onNoNextSituation": "DefiningAcceptance"
      }
    ]
  },
  "BreakingTasks": {
    "situation": "BreakingTasks",
    "startQuestionId": "tasks-text",
    "questions": [
      {
        "id": "tasks-text",
        "question": "작업을 수십 분~몇 시간 단위로 분해해주세요 (시작 상태 → 행동 → 종료 상태)",
        "type": "text",
        "required": true,
        "nextQuestionId": "tasks-independent",
        "aiPromptTemplate": {
          "template": "# 작업 분해(Task Breakdown) 도움\n\n## [INPUT – Human]\n\n1. Design output:\n- {{design}}\n\n## [AI PROMPT]\n\nYou are generating executable micro-tasks.\n\nDefinition:\nA task is a single state change with a verifiable outcome.\n\nRules:\n- Less than 90 minutes per task\n- Single responsibility\n- One verification method\n\nPriority Principle:\n- **Implementations that rarely change must be implemented first.**\n- When ordering tasks, prioritize stability: tasks that implement stable components, interfaces, or core functionality with minimal expected changes should be executed before tasks that are likely to require rework.\n- This reduces implementation rework and establishes a solid foundation.\n\nTasks:\n1. Decompose design into atomic tasks.\n2. For each task define:\n   - start state\n   - action\n   - end state\n3. For each task, assess its expected change frequency:\n   - Stable tasks: implement stable components/interfaces, core functionality, minimal expected changes\n   - Volatile tasks: implement evolving features, experimental functionality, likely to change\n4. Order tasks by:\n   - **Primary: Change frequency (stable first)**\n   - Secondary: Dependency relationships\n5. Identify parallelizable tasks.\n6. Flag vague or oversized tasks.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Tasks are immediately executable\n- Dependencies are explicit\n- Change frequency assessment included\n- Task ordering reflects stability priority"
        }
      },
      {
        "id": "tasks-independent",
        "question": "각 작업이 독립적으로 실행 가능한가요? (명확한 입력/출력)",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "tasks-session-sized",
        "onNoNextSituation": "Designing"
      },
      {
        "id": "tasks-session-sized",
        "question": "각 작업을 90분 안에 완료할 수 있나요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "Implementing",
        "onNoNextQuestionId": "tasks-session-sized"
      }
    ]
  },
  "Implementing": {
    "situation": "Implementing",
    "startQuestionId": "task-implementation-text",
    "questions": [
      {
        "id": "task-implementation-text",
        "question": "현재 작업의 구현 내용을 작성해주세요 (코드 스켈레톤, 주요 로직 등)",
        "type": "text",
        "required": true,
        "nextQuestionId": "task-complete",
        "aiPromptTemplate": {
          "template": "# 구현(Implementation) 도움\n\n## [INPUT – Human]\n\n1. Current task:\n- {{task}}\n\n## [AI PROMPT]\n\nYou are assisting implementation.\n\nRules:\n- No system redesign.\n- No scope expansion.\n\nTasks:\n1. Produce a minimal implementation skeleton.\n2. Identify failure-prone areas.\n3. Define quick sanity checks.\n4. Suggest fast validation steps.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Code runs\n- Task end state achieved"
        }
      },
      {
        "id": "task-complete",
        "question": "작업이 완료되었나요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "Verifying",
        "onNoNextQuestionId": "task-stuck"
      },
      {
        "id": "task-stuck",
        "question": "막혔나요? (15분 이상 고민 중)",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "task-stuck-reason",
        "onNoNextQuestionId": "task-complete"
      },
      {
        "id": "task-stuck-reason",
        "question": "막힌 이유를 선택하세요",
        "type": "multiple",
        "required": true,
        "options": ["작업 분해 필요", "새로운 문제 발견", "기술적 제약 발견"]
      }
    ]
  },
  "Verifying": {
    "situation": "Verifying",
    "startQuestionId": "verification-test-text",
    "questions": [
      {
        "id": "verification-test-text",
        "question": "검증 테스트를 작성해주세요 (테스트 코드 또는 재현 가능한 테스트 절차)",
        "type": "text",
        "required": true,
        "nextQuestionId": "verification-improvement-ideas",
        "aiPromptTemplate": {
          "template": "# 검증(Verification) 도움\n\n## [INPUT – Human]\n\n1. Implementation + acceptance criteria:\n- Implementation: {{task-implementation-text}}\n- Acceptance Criteria: {{acceptanceCriteria}}\n\n## [AI PROMPT]\n\nYou are validating correctness.\n\nTasks:\n1. Generate verification tests.\n2. Define observable success signals.\n3. Define observable failure signals.\n4. Classify failure origin:\n   - implementation fault\n   - acceptance fault\n   - design fault\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Tests are reproducible\n- Results are evidence-based"
        }
      },
      {
        "id": "verification-improvement-ideas",
        "question": "개선점, 구현 방법, 또는 검증 방법이 떠오르나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "verification-go-to-implementation",
        "onNoNextQuestionId": "all-criteria-met"
      },
      {
        "id": "verification-go-to-implementation",
        "question": "Implementation으로 돌아가시겠습니까? (연속 최대 5회)",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "Implementing",
        "onNoNextQuestionId": "all-criteria-met"
      },
      {
        "id": "all-criteria-met",
        "question": "모든 기준이 만족되었나요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "Verified",
        "onNoNextQuestionId": "bugs-found"
      },
      {
        "id": "bugs-found",
        "question": "버그가 발견되었나요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "Implementing",
        "onNoNextQuestionId": "all-criteria-met"
      }
    ]
  },
  "Verified": {
    "situation": "Verified",
    "startQuestionId": "verification-decision-text",
    "questions": [
      {
        "id": "verification-decision-text",
        "question": "검증 결과와 판단 근거를 작성해주세요",
        "type": "text",
        "required": true,
        "nextQuestionId": "ready-for-release",
        "aiPromptTemplate": {
          "template": "# 검증 완료 판단 도움\n\n## [INPUT – Human]\n\n1. Test results:\n- {{verification-test-text}}\n\n## [AI PROMPT]\n\nYou are performing decision analysis.\n\nTasks:\n1. Evaluate acceptance satisfaction.\n2. Decide pass or fail.\n3. If failed:\n   - identify broken assumption\n   - specify rollback stage\n4. Justify decision logically.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Clear yes or no decision\n- Rollback path defined"
        }
      },
      {
        "id": "ready-for-release",
        "question": "다음 단계(릴리스) 준비가 되었나요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "Releasing",
        "onNoNextQuestionId": "ready-for-release"
      }
    ]
  },
  "Releasing": {
    "situation": "Releasing",
    "startQuestionId": "release-note-text",
    "questions": [
      {
        "id": "release-note-text",
        "question": "릴리스 노트를 작성해주세요 (최소 릴리스 노트, 알려진 제한사항 포함)",
        "type": "text",
        "required": true,
        "nextQuestionId": "release-announced",
        "aiPromptTemplate": {
          "template": "# 릴리스(Release) 준비 도움\n\n## [INPUT – Human]\n\n1. Verified solution:\n- Problem: {{problem}}\n- Solution: {{task-implementation-text}}\n\n## [AI PROMPT]\n\nYou are preparing delivery.\n\nTasks:\n1. Generate a minimal release note.\n2. Define known limitations.\n3. Create a release checklist.\n4. Identify deployment risks.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Delivered to real user or system"
        }
      },
      {
        "id": "release-announced",
        "question": "릴리스가 공지되었나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "cycle-complete",
        "onNoNextQuestionId": "release-announced"
      },
      {
        "id": "cycle-complete",
        "question": "이번 Cycle을 완료하시겠습니까?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "CollectingFeedback",
        "onNoNextQuestionId": "cycle-complete"
      }
    ]
  },
  "CollectingFeedback": {
    "situation": "CollectingFeedback",
    "startQuestionId": "feedback-documented-text",
    "questions": [
      {
        "id": "feedback-documented-text",
        "question": "피드백을 작성해주세요",
        "type": "text",
        "required": true,
        "nextSituation": "Learning",
        "aiPromptTemplate": {
          "template": "# 피드백 수집 및 문서화 도움\n\n## [INPUT – Human]\n\n1. Feedback and observations:\n- Intent: {{intent}}\n- Released solution: {{problem}}\n- Release note: {{release-note-text}}\n\n## [AI PROMPT]\n\nYou are extracting learning.\n\nTasks:\n1. Compare expectation versus reality.\n2. Identify incorrect assumptions.\n3. Propose updates to:\n   - intent\n   - problem\n   - acceptance\n4. Extract reusable lessons.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Learning captured\n- Next cycle defined"
        }
      }
    ]
  },
  "Learning": {
    "situation": "Learning",
    "startQuestionId": "learned-new-facts",
    "questions": [
      {
        "id": "learned-new-facts",
        "question": "새롭게 알아낸 사실이 있나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "learned-new-facts-text",
        "onNoNextQuestionId": "learned-improvements"
      },
      {
        "id": "learned-new-facts-text",
        "question": "어떤 사실을 새롭게 알아냈나요?",
        "type": "text",
        "required": true,
        "nextQuestionId": "learned-improvements",
        "aiPromptTemplate": {
          "template": "# 학습 내용 추출 도움\n\n## [INPUT – Human]\n\n1. Feedback and observations:\n- Intent: {{intent}}\n- Problem: {{problem}}\n- Feedback: {{feedback-documented-text}}\n\n## [AI PROMPT]\n\nYou are extracting learning.\n\nTasks:\n1. Compare expectation versus reality.\n2. Identify incorrect assumptions.\n3. Extract reusable lessons.\n4. Identify patterns in failures or successes.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Learning captured\n- Assumptions updated"
        }
      },
      {
        "id": "learned-improvements",
        "question": "개선할 점을 찾았나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "learned-improvements-text",
        "onNoNextQuestionId": "learned-clear-implementation"
      },
      {
        "id": "learned-improvements-text",
        "question": "어떤 점을 개선할 수 있나요?",
        "type": "text",
        "required": true,
        "nextQuestionId": "learned-feedback-issues-list",
        "aiPromptTemplate": {
          "template": "# 개선점 도출 도움\n\n## [INPUT – Human]\n\n1. Learning and feedback:\n- New facts: {{learned-new-facts-text}}\n- Feedback: {{feedback-documented-text}}\n- Intent: {{intent}}\n- Problem: {{problem}}\n\n## [AI PROMPT]\n\nYou are identifying improvement opportunities.\n\nTasks:\n1. Analyze gaps between intent and reality.\n2. Identify improvement opportunities.\n3. Propose updates to:\n   - intent\n   - problem\n   - acceptance criteria\n4. Prioritize improvements by impact.\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- Improvement opportunities identified\n- Next cycle defined"
        }
      },
      {
        "id": "learned-feedback-issues-list",
        "question": "피드백과 이슈 목록을 작성해주세요 (각 항목을 개별적으로 입력)",
        "type": "list",
        "required": false,
        "nextQuestionId": "learned-next-improvement-recommendation",
        "aiPromptTemplate": {
          "template": "# 다음 개선 항목 추천\n\n## [INPUT – Human]\n\n1. Feedback and Issues List:\n{{learned-feedback-issues-list}}\n\n2. Improvement Opportunities:\n{{learned-improvements-text}}\n\n3. Context:\n- Intent: {{intent}}\n- Problem: {{problem}}\n- New Facts: {{learned-new-facts-text}}\n- Feedback: {{feedback-documented-text}}\n\n## [AI PROMPT]\n\nYou are a product strategist analyzing feedback and issues to recommend the next improvement item.\n\nScoring Framework:\n\n**Essential Features (High Priority):**\n- Core functionality that must work for the product to be usable\n- Blocking issues that prevent users from achieving their goals\n- Critical bugs or missing fundamental features\n- Security or data integrity concerns\n- Compliance or legal requirements\n- Score: 8-10 points\n\n**Modifiable Features (Medium Priority):**\n- Enhancements that improve user experience but aren't critical\n- Nice-to-have features that add value\n- Performance optimizations\n- UI/UX improvements\n- Non-blocking bugs or edge cases\n- Score: 4-7 points\n\n**Optional Features (Low Priority):**\n- Cosmetic changes\n- Future enhancements\n- Experimental features\n- Score: 1-3 points\n\nTasks:\n1. Analyze each item in the Feedback and Issues List.\n2. For each item, classify it as:\n   - Essential Feature (must-have, core functionality)\n   - Modifiable Feature (nice-to-have, can be changed)\n   - Optional Feature (cosmetic, future enhancement)\n3. Score each item (1-10 scale) based on:\n   - Impact on user goals\n   - Urgency (blocking vs. enhancement)\n   - Effort vs. value ratio\n   - Alignment with intent\n4. Rank all items by priority score.\n5. Recommend the TOP 1 item to improve next with:\n   - Item description\n   - Classification (Essential/Modifiable/Optional)\n   - Score and reasoning\n   - Why this should be prioritized\n   - Suggested next steps\n\nOutput Format:\n- For each item: [Item] | [Classification] | [Score] | [Reasoning]\n- Top Recommendation: [Item] | [Detailed Analysis]\n\n## [OUTPUT FORMAT]\n\n- Output the answer as a copyable markdown code block or d2 code block\n- Use a list instead of a table\n- Do not nest d2 code blocks inside markdown code blocks\n\n## [EXIT CONDITION]\n\n- All items scored and classified\n- Top recommendation clearly identified\n- Reasoning provided for prioritization"
        }
      },
      {
        "id": "learned-next-improvement-recommendation",
        "question": "AI가 추천한 다음 개선 항목을 확인하셨나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "learned-clear-implementation",
        "onNoNextQuestionId": "learned-clear-implementation"
      },
      {
        "id": "learned-clear-implementation",
        "question": "바로 어떻게 개선해야할지 떠오르나요?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "Implementing",
        "onNoNextQuestionId": "learned-next-action"
      },
      {
        "id": "learned-next-action",
        "question": "다음 행동을 선택하세요",
        "type": "multiple",
        "required": true,
        "options": ["새로운 문제 선택", "같은 문제 심화", "Intent 조정", "완료"]
      }
    ]
  },
  "Ending": {
    "situation": "Ending",
    "startQuestionId": "cycle-finished",
    "questions": [
      {
        "id": "cycle-finished",
        "question": "이번 Cycle이 완료되었습니다. 무의식 시간으로 이동하시겠습니까?",
        "type": "yesno",
        "required": true,
        "onYesNextSituation": "Unconscious",
        "onNoNextQuestionId": "cycle-finished"
      }
    ]
  },
  "Unconscious": {
    "situation": "Unconscious",
    "startQuestionId": "unconscious-wait",
    "questions": [
      {
        "id": "unconscious-wait",
        "question": "무의식 시간을 보내고 있습니다. 새 Cycle을 시작할 준비가 되면 선택하세요.",
        "type": "multiple",
        "required": true,
        "options": ["새 Cycle 시작"]
      }
    ]
  },
  "Undetermined": {
    "situation": "Undetermined",
    "startQuestionId": "info-missing",
    "questions": [
      {
        "id": "info-missing",
        "question": "어떤 정보가 누락되었나요?",
        "type": "text",
        "required": true,
        "nextQuestionId": "info-can-collect"
      },
      {
        "id": "info-can-collect",
        "question": "필요한 정보를 수집할 수 있나요?",
        "type": "yesno",
        "required": true,
        "onYesNextQuestionId": "info-collect-plan",
        "onNoNextQuestionId": "closest-situation"
      },
      {
        "id": "info-collect-plan",
        "question": "정보 수집 계획을 작성해주세요",
        "type": "text",
        "required": true,
        "nextQuestionId": "closest-situation"
      },
      {
        "id": "closest-situation",
        "question": "가장 가까운 상황이 무엇인가요?",
        "type": "multiple",
        "required": true,
        "options": ["DefiningIntent", "SelectingProblem", "DefiningAcceptance", "CheckingFeasibility", "Designing", "BreakingTasks", "Implementing", "Verifying", "Verified", "Releasing", "CollectingFeedback", "Learning"]
      }
    ]
  }
}
